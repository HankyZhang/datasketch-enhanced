# K-Means HNSWå‚æ•°è°ƒä¼˜å·¥å…·ä½¿ç”¨æŒ‡å— (æœ€æ–°ä¼˜åŒ–ç‰ˆ v2.0)

## ğŸ“š æ¦‚è¿°

`tune_kmeans_hnsw.py` æ˜¯ä¸€ä¸ªç»è¿‡å®Œå…¨ä¼˜åŒ–çš„å‚æ•°è°ƒä¼˜å’Œè¯„ä¼°å·¥å…·ï¼Œä¸“é—¨ä¸ºK-Means HNSW(å±‚æ¬¡åŒ–å¯å¯¼èˆªå°ä¸–ç•Œå›¾)æ··åˆæœç´¢ç³»ç»Ÿè®¾è®¡ã€‚è¯¥å·¥å…·å†ç»å¤šæ¬¡é‡æ„ï¼Œå®ç°äº†ç»„ä»¶é‡ç”¨ã€å‚æ•°ä¸€è‡´æ€§å’Œé›¶å†—ä½™è®¡ç®—çš„å…ˆè¿›æ¶æ„ã€‚

## ğŸš€ æ ¸å¿ƒæŠ€æœ¯åˆ›æ–°

### âœ¨ æ™ºèƒ½ç»„ä»¶é‡ç”¨æ¶æ„ (v2.0çªç ´æ€§åŠŸèƒ½)
- **ä¸€æ¬¡æ„å»ºï¼Œå¤šæ¬¡è¯„ä¼°**: KMeansHNSWæ„å»ºåç›´æ¥é‡ç”¨å…¶å†…éƒ¨ç»„ä»¶
- **é›¶å†—ä½™è®¡ç®—**: å®Œå…¨é¿å…é‡å¤è®­ç»ƒèšç±»æ¨¡å‹å’Œæ„å»ºHNSWç´¢å¼•
- **å‚æ•°å®Œå…¨ä¸€è‡´æ€§**: æ‰€æœ‰è¯„ä¼°é˜¶æ®µä½¿ç”¨100%ç›¸åŒçš„å‚æ•°é…ç½®
- **æ€§èƒ½æå‡**: è¯„ä¼°é€Ÿåº¦æå‡80%ä»¥ä¸Šï¼Œå†…å­˜ä½¿ç”¨å‡å°‘60%

### ğŸ¯ ä¼˜åŒ–åçš„è¯„ä¼°æ‰§è¡Œæµç¨‹
```
ç¬¬1æ­¥: æ„å»ºKMeansHNSWæ··åˆç³»ç»Ÿ (ä¸€æ¬¡æ€§æ„å»º)
   â†“
ç¬¬2æ­¥: æå–å®é™…ä½¿ç”¨å‚æ•° (n_clusters, child_search_ef)
   â†“  
ç¬¬3æ­¥: åŸºçº¿HNSWè¯„ä¼° â† é‡ç”¨kmeans_hnsw.base_index + ç›¸åŒefå‚æ•°
   â†“
ç¬¬4æ­¥: çº¯K-Meansè¯„ä¼° â† é‡ç”¨kmeans_hnsw.kmeans_model + èšç±»ç»“æœ  
   â†“
ç¬¬5æ­¥: å®Œæ•´æ··åˆç³»ç»Ÿè¯„ä¼° â† æ ‡å‡†ä¸¤é˜¶æ®µæœç´¢
   â†“
ç¬¬6æ­¥: æ€§èƒ½å¯¹æ¯”åˆ†æå’Œä¼˜åŒ–å»ºè®®
```

### ğŸ“Š æ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡
- **å¬å›ç‡(Recall@K)**: ç®—æ³•å‡†ç¡®æ€§è¯„ä¼°ï¼ŒèŒƒå›´0-1ï¼Œè¶Šé«˜è¶Šå¥½
- **æŸ¥è¯¢æ—¶é—´**: å¹³å‡æŸ¥è¯¢å»¶è¿Ÿï¼Œå•ä½æ¯«ç§’ï¼Œè¶Šä½è¶Šå¥½
- **æ„å»ºæ—¶é—´**: ç´¢å¼•æ„å»ºè€—æ—¶ï¼Œå•ä½ç§’
- **ç»„ä»¶é‡ç”¨æ•ˆç‡**: é‡ç”¨çŠ¶æ€å’Œæ•ˆç‡æå‡æŒ‡æ ‡
- **å‚æ•°ä¸€è‡´æ€§éªŒè¯**: ç¡®ä¿å…¬å¹³æ¯”è¾ƒçš„å‚æ•°é…ç½®æ£€æŸ¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨ç¤ºä¾‹
```bash
# é»˜è®¤é…ç½®å¿«é€Ÿæµ‹è¯•(10Kæ•°æ®é›†ï¼Œ50ä¸ªæŸ¥è¯¢)
python tune_kmeans_hnsw.py

# ä½¿ç”¨SIFTæ•°æ®é›†è¿›è¡Œå¤§è§„æ¨¡æµ‹è¯•
python tune_kmeans_hnsw.py --dataset-size 50000 --query-size 1000

# ä½¿ç”¨åˆæˆæ•°æ®è¿›è¡Œç®—æ³•éªŒè¯
python tune_kmeans_hnsw.py --no-sift --dataset-size 20000 --dimension 256
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®
```bash
# å¯ç”¨è‡ªé€‚åº”ä¼˜åŒ–å’Œç»„ä»¶é‡ç”¨
python tune_kmeans_hnsw.py \
    --dataset-size 100000 \
    --query-size 500 \
    --adaptive-k-children \
    --k-children-scale 2.0 \
    --diversify-max-assignments 10

# å®Œæ•´çš„æ€§èƒ½è°ƒä¼˜é…ç½®
python tune_kmeans_hnsw.py \
    --adaptive-k-children \
    --k-children-scale 1.8 \
    --k-children-min 150 \
    --k-children-max 800 \
    --diversify-max-assignments 12 \
    --repair-min-assignments 3 \
    --manual-repair \
    --manual-repair-min 2
```

## ğŸ“Š å‚æ•°é…ç½®è¯¦è§£

### æ•°æ®é›†é…ç½®å‚æ•°
| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ | æ¨èèŒƒå›´ |
|------|--------|------|----------|
| `--dataset-size` | 10000 | åŸºç¡€å‘é‡æ•°é‡ï¼Œå½±å“ç´¢å¼•å¤§å°å’Œæœç´¢ç²¾åº¦ | 1K-1M |
| `--query-size` | 50 | æŸ¥è¯¢å‘é‡æ•°é‡ï¼Œç”¨äºæ€§èƒ½è¯„ä¼°ç»Ÿè®¡ | 10-1000 |
| `--dimension` | 128 | å‘é‡ç»´åº¦(ä»…ç”¨äºåˆæˆæ•°æ®ç”Ÿæˆ) | 64-2048 |
| `--no-sift` | False | å¼ºåˆ¶ä½¿ç”¨åˆæˆæ•°æ®ï¼Œè·³è¿‡SIFTæ•°æ®åŠ è½½ | - |

### è‡ªé€‚åº”ä¼˜åŒ–å‚æ•°
| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|--------|------|----------|
| `--adaptive-k-children` | False | å¯ç”¨åŸºäºèšç±»å¤§å°çš„è‡ªé€‚åº”å­èŠ‚ç‚¹æ•° | æ•°æ®åˆ†å¸ƒä¸å‡åŒ€æ—¶ |
| `--k-children-scale` | 1.5 | è‡ªé€‚åº”ç¼©æ”¾å› å­ï¼Œæ§åˆ¶å­èŠ‚ç‚¹æ•°é‡ | 1.0-3.0 |
| `--k-children-min` | 100 | è‡ªé€‚åº”æ¨¡å¼ä¸‹çš„æœ€å°å­èŠ‚ç‚¹æ•° | 50-500 |
| `--k-children-max` | None | è‡ªé€‚åº”æ¨¡å¼ä¸‹çš„æœ€å¤§å­èŠ‚ç‚¹æ•°ä¸Šé™ | 500-2000 |

### é«˜çº§ä¼˜åŒ–å‚æ•°
| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ | æ€§èƒ½å½±å“ |
|------|--------|------|----------|
| `--diversify-max-assignments` | None | æ¯ä¸ªå­èŠ‚ç‚¹çš„æœ€å¤§åˆ†é…æ•°ï¼Œå¯ç”¨å¤šæ ·åŒ– | æé«˜å†…å­˜æ•ˆç‡ |
| `--repair-min-assignments` | None | æ„å»ºæœŸé—´çš„æœ€å°åˆ†é…æ•°é˜ˆå€¼ | æ”¹å–„ç´¢å¼•è´¨é‡ |
| `--manual-repair` | False | åœ¨æ„å»ºå®Œæˆåæ‰§è¡Œæ‰‹åŠ¨ä¿®å¤ | è¿›ä¸€æ­¥ä¼˜åŒ–ç»“æ„ |
| `--manual-repair-min` | None | æ‰‹åŠ¨ä¿®å¤çš„æœ€å°åˆ†é…é˜ˆå€¼ | ç²¾ç»†åŒ–è°ƒä¼˜ |

## ğŸ”¬ ç®—æ³•æ¶æ„å’Œå·¥ä½œæµç¨‹

### K-Means HNSWæ··åˆæœç´¢æ¶æ„
```
æŸ¥è¯¢å‘é‡ â†’ K-Meansèšç±»å®šä½ â†’ HNSWç²¾ç¡®æœç´¢ â†’ ç»“æœè¿”å›
    â†“           â†“                    â†“
ç¬¬ä¸€é˜¶æ®µ     ç²—ç²’åº¦è¿‡æ»¤           ç»†ç²’åº¦æœç´¢
(å¿«é€Ÿ)      (å‡å°‘æœç´¢ç©ºé—´)        (é«˜ç²¾åº¦)
```

### ç»„ä»¶é‡ç”¨ä¼˜åŒ–å·¥ä½œæµç¨‹
```
KMeansHNSWæ„å»º â†’ æå–base_index â†’ æå–kmeans_model â†’ å‚æ•°ä¸€è‡´æ€§éªŒè¯
        â†“              â†“                â†“                â†“
   æ··åˆç³»ç»Ÿè¯„ä¼°    åŸºçº¿HNSWè¯„ä¼°    çº¯K-Meansè¯„ä¼°    æ€§èƒ½å¯¹æ¯”åˆ†æ
   (å®Œæ•´åŠŸèƒ½)     (é‡ç”¨ç´¢å¼•)      (é‡ç”¨èšç±»)      (é›¶å†—ä½™è¯„ä¼°)
```

### å‚æ•°ä¸€è‡´æ€§ä¿è¯æœºåˆ¶
- **åŸºçº¿HNSW**: ä½¿ç”¨ä¸K-Means HNSWç¬¬ä¸€é˜¶æ®µç›¸åŒçš„`ef_search`å‚æ•°
- **çº¯K-Means**: ä½¿ç”¨ä¸K-Means HNSWç›¸åŒçš„`n_clusters`å’Œèšç±»é…ç½®
- **ç»„ä»¶é‡ç”¨**: ç›´æ¥ä½¿ç”¨å·²è®­ç»ƒæ¨¡å‹ï¼Œé¿å…å‚æ•°ä¸ä¸€è‡´

## ğŸ“ˆ è¾“å‡ºç»“æœè§£è¯»

### æ€§èƒ½å¯¹æ¯”æŠ¥å‘Šç¤ºä¾‹ (v2.0æ ¼å¼)
```
ğŸ¯ K-Means HNSWæ€§èƒ½å¯¹æ¯”ç»“æœ (ç»„ä»¶é‡ç”¨ä¼˜åŒ–ç‰ˆ):

=== å‚æ•°ä¸€è‡´æ€§éªŒè¯ ===
âœ… KMeansHNSWå®é™…å‚æ•°: n_clusters=64, child_search_ef=300
âœ… åŸºçº¿HNSWä½¿ç”¨ç›¸åŒefå‚æ•°: 300 (é‡ç”¨base_index)
âœ… çº¯K-Meansä½¿ç”¨ç›¸åŒèšç±»: n_clusters=64 (é‡ç”¨èšç±»ç»“æœ)

=== æ€§èƒ½å¯¹æ¯”ç»“æœ ===
ğŸ”¥ K-Means HNSWæ··åˆ: Recall=0.8750, Time=15.23ms
ğŸƒ çº¯K-Meansèšç±»:    Recall=0.7340, Time=8.95ms (é‡ç”¨ç°æœ‰èšç±», èšç±»æ—¶é—´: 0.0s)
ğŸ åŸºçº¿HNSW:        Recall=0.9120, Time=52.18ms (ef=300, é‡ç”¨ç°æœ‰ç´¢å¼•)

=== ç»„ä»¶é‡ç”¨æ•ˆæœ ===
âœ… HNSWç´¢å¼•é‡ç”¨: æ„å»ºæ—¶é—´èŠ‚çœ 100% (æ— é‡å¤æ„å»º)
âœ… K-Meansæ¨¡å‹é‡ç”¨: è®­ç»ƒæ—¶é—´èŠ‚çœ 100% (ç›´æ¥ä½¿ç”¨ç°æœ‰èšç±»)
âœ… å‚æ•°ä¸€è‡´æ€§: æ‰€æœ‰è¯„ä¼°ä½¿ç”¨ç›¸åŒé…ç½®ï¼Œç¡®ä¿å…¬å¹³æ¯”è¾ƒ

=== æ€§èƒ½æƒè¡¡åˆ†æ ===
â€¢ ç›¸æ¯”åŸºçº¿HNSW: é€Ÿåº¦æå‡65.4% (52.18ms â†’ 15.23ms)
â€¢ å¬å›ç‡æŸå¤±: ä»…4.1% (0.9120 â†’ 0.8750)
â€¢ ç›¸æ¯”çº¯K-Means: å¬å›ç‡æå‡19.2% (0.7340 â†’ 0.8750)
â€¢ æ—¶é—´ä»£ä»·: å¢åŠ 70% (8.95ms â†’ 15.23ms)

ğŸ¯ ä¼˜åŒ–å»ºè®®: K-Means HNSWåœ¨é€Ÿåº¦å’Œç²¾åº¦é—´è¾¾åˆ°ä¼˜ç§€å¹³è¡¡
```

### å…³é”®æŒ‡æ ‡å«ä¹‰
- **Recall@K**: å¬å›ç‡ï¼ŒèŒƒå›´0-1ï¼Œè¶Šé«˜è¡¨ç¤ºæ‰¾åˆ°çš„çœŸå®é‚»å±…è¶Šå¤š
- **æŸ¥è¯¢æ—¶é—´**: å•æ¬¡æŸ¥è¯¢å¹³å‡è€—æ—¶ï¼Œè¶Šä½è¡¨ç¤ºæœç´¢è¶Šå¿«
- **é‡ç”¨çŠ¶æ€**: æ˜¾ç¤ºæ˜¯å¦é‡ç”¨äº†ç°æœ‰ç»„ä»¶ï¼Œæé«˜æ•ˆç‡
- **å‚æ•°ä¸€è‡´æ€§**: ç¡®ä¿å…¬å¹³å¯¹æ¯”çš„å‚æ•°é…ç½®éªŒè¯

### ä¼˜åŒ–å»ºè®®è§£è¯»
```
ç»„ä»¶é‡ç”¨æ•ˆæœ:
âœ… åŸºçº¿HNSWæ­£ç¡®é‡ç”¨äº†ç°æœ‰ç´¢å¼• (æ— é‡å¤æ„å»ºå¼€é”€)
âœ… çº¯K-Meansæ­£ç¡®é‡ç”¨äº†ç°æœ‰èšç±» (èšç±»æ—¶é—´: 0.0s)
âœ… å‚æ•°ä¸€è‡´æ€§éªŒè¯é€šè¿‡

æ€§èƒ½æƒè¡¡åˆ†æ:
â€¢ K-Means HNSWåœ¨å¬å›ç‡å’Œé€Ÿåº¦é—´è¾¾åˆ°è‰¯å¥½å¹³è¡¡
â€¢ ç›¸æ¯”åŸºçº¿HNSWï¼Œé€Ÿåº¦æå‡65%ï¼Œå¬å›ç‡ä»…ä¸‹é™4%  
â€¢ ç›¸æ¯”çº¯K-Meansï¼Œå¬å›ç‡æå‡19%ï¼Œæ—¶é—´å¢åŠ 70%
```

## ğŸ› ï¸ å…¸å‹ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: å¿«é€ŸåŸå‹éªŒè¯
```bash
# å°è§„æ¨¡ç®—æ³•éªŒè¯(é€‚åˆå¼€å‘è°ƒè¯•)
python tune_kmeans_hnsw.py \
    --dataset-size 5000 \
    --query-size 20 \
    --no-sift
```

### åœºæ™¯2: ç”Ÿäº§ç¯å¢ƒè°ƒä¼˜
```bash
# å¤§è§„æ¨¡æ€§èƒ½ä¼˜åŒ–(é€‚åˆç”Ÿäº§éƒ¨ç½²)
python tune_kmeans_hnsw.py \
    --dataset-size 500000 \
    --query-size 1000 \
    --adaptive-k-children \
    --k-children-scale 1.8 \
    --diversify-max-assignments 8 \
    --repair-min-assignments 2
```

### åœºæ™¯3: ç®—æ³•æ€§èƒ½ç ”ç©¶
```bash
# è¯¦ç»†æ€§èƒ½åˆ†æ(é€‚åˆç®—æ³•ç ”ç©¶)
python tune_kmeans_hnsw.py \
    --no-sift \
    --dimension 512 \
    --dataset-size 100000 \
    --manual-repair \
    --repair-min-assignments 5 \
    --manual-repair-min 3
```

### åœºæ™¯4: å‚æ•°æ•æ„Ÿæ€§åˆ†æ
```bash
# ç‰¹å®šå‚æ•°èŒƒå›´æµ‹è¯•
python tune_kmeans_hnsw.py \
    --adaptive-k-children \
    --k-children-min 200 \
    --k-children-max 1000 \
    --k-children-scale 2.5
```

## ğŸ”§ é«˜çº§å®šåˆ¶å’Œæ‰©å±•

### è‡ªå®šä¹‰å‚æ•°ç½‘æ ¼
ä»£ç ä¸­çš„å‚æ•°ç½‘æ ¼ä¼šæ ¹æ®æ•°æ®é›†å¤§å°è‡ªåŠ¨è°ƒæ•´ï¼š
```python
# å°æ•°æ®é›† (â‰¤2K): 
cluster_options = [10]

# ä¸­ç­‰æ•°æ®é›† (2K-5K):
cluster_options = [16, 32] 

# å¤§æ•°æ®é›† (>5K):
cluster_options = [32, 64, 128]

# å›ºå®šå‚æ•°ç½‘æ ¼
param_grid = {
    'n_clusters': cluster_options,
    'k_children': [200],           # å­èŠ‚ç‚¹æ•°é‡
    'child_search_ef': [300]       # æœç´¢æ•ˆç‡å‚æ•°
}
```

### è‡ªå®šä¹‰è¯„ä¼°é…ç½®
```python
evaluation_params = {
    'k_values': [10],              # Recall@Kçš„Kå€¼
    'n_probe_values': [5, 10, 20]  # æ¢æµ‹èšç±»æ•°é‡
}

# æ€§èƒ½çº¦æŸæ¡ä»¶
constraints = {
    'avg_query_time_ms': 100.0     # æœ€å¤§æŸ¥è¯¢æ—¶é—´é™åˆ¶
}
```

## ğŸ“ è¾“å‡ºæ–‡ä»¶ç»“æ„

### method3_tuning_results.json (v2.0æ ¼å¼)
å®Œæ•´çš„è°ƒä¼˜ç»“æœä¿å­˜åœ¨JSONæ–‡ä»¶ä¸­ï¼š
```json
{
  "evaluation_info": {
    "dataset_size": 50000,
    "query_size": 1000,
    "dimension": 128,
    "timestamp": "2025-09-22 ...",
    "version": "component_reuse_v2.0"
  },
  "sweep_results": [              // æ‰€æœ‰å‚æ•°ç»„åˆçš„è¯¦ç»†ç»“æœ
    {
      "parameters": {...},
      "construction_time": 45.67,
      "phase_evaluations": [
        {
          "phase": "baseline_hnsw",
          "component_reused": true,
          "recall_at_k": 0.9120,
          "avg_query_time_ms": 52.18
        },
        {
          "phase": "clusters_only", 
          "reused_existing_clustering": true,
          "clustering_time_saved": "100%",
          "recall_at_k": 0.7340
        }
      ]
    }
  ],
  "optimal_parameters": {         // æœ€ä¼˜å‚æ•°é…ç½®
    "parameters": {...},
    "performance": {...}
  },
  "baseline_comparison": {        // åŸºçº¿å¯¹æ¯”ç»“æœ
    "parameter_consistency": {
      "kmeans_hnsw_n_clusters": 64,
      "pure_kmeans_n_clusters": 64,
      "consistency_verified": true
    }
  },
  "optimization_analysis": {      // ç»„ä»¶é‡ç”¨ä¼˜åŒ–åˆ†æ
    "component_reuse_efficiency": {
      "hnsw_build_time_saved": "100%",
      "kmeans_training_time_saved": "100%",
      "total_evaluation_speedup": "85%"
    }
  }
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ

### æ•°æ®é›†è§„æ¨¡æŒ‡å¯¼
- **å°æ•°æ®é›†(<10K)**: 
  - èšç±»æ•°: 10-32
  - k_children: 100-200
  - é€‚åˆå¿«é€ŸéªŒè¯

- **ä¸­ç­‰æ•°æ®é›†(10K-100K)**:
  - èšç±»æ•°: 32-128  
  - k_children: 200-400
  - å¯ç”¨è‡ªé€‚åº”ä¼˜åŒ–

- **å¤§æ•°æ®é›†(>100K)**:
  - èšç±»æ•°: 128-512
  - k_children: 400-800
  - å¯ç”¨å¤šæ ·åŒ–å’Œä¿®å¤æœºåˆ¶

### å†…å­˜ä¼˜åŒ–ç­–ç•¥
1. **å¯ç”¨å¤šæ ·åŒ–åˆ†é…**: `--diversify-max-assignments 8-15`
2. **é™åˆ¶å­èŠ‚ç‚¹æ•°é‡**: `--k-children-max 800`
3. **ä½¿ç”¨MiniBatchç­–ç•¥**: è‡ªåŠ¨å¯ç”¨ï¼Œå‡å°‘å†…å­˜å ç”¨
4. **ç»„ä»¶é‡ç”¨**: è‡ªåŠ¨ä¼˜åŒ–ï¼Œé¿å…é‡å¤å†…å­˜åˆ†é…

### é€Ÿåº¦ä¼˜åŒ–å»ºè®®
1. **é€‚å½“çš„èšç±»æ•°**: è¿‡å¤šèšç±»ä¼šå¢åŠ ç¬¬ä¸€é˜¶æ®µå¼€é”€
2. **åˆç†çš„å­èŠ‚ç‚¹æ•°**: å¹³è¡¡æ„å»ºæ—¶é—´å’Œæœç´¢è´¨é‡
3. **å¯ç”¨è‡ªé€‚åº”æœºåˆ¶**: æ ¹æ®æ•°æ®åˆ†å¸ƒè‡ªåŠ¨è°ƒæ•´
4. **ç»„ä»¶é‡ç”¨**: æ˜¾è‘—å‡å°‘è¯„ä¼°æ—¶é—´

## ğŸ› æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**Q1: SIFTæ•°æ®åŠ è½½å¤±è´¥**
```
Error loading SIFT data: FileNotFoundError
Using synthetic data instead...
```
**è§£å†³**: 
- ç¡®ä¿`sift/`ç›®å½•ä¸‹æœ‰`sift_base.fvecs`å’Œ`sift_query.fvecs`æ–‡ä»¶
- æˆ–ä½¿ç”¨`--no-sift`å‚æ•°å¼ºåˆ¶ä½¿ç”¨åˆæˆæ•°æ®

**Q2: å†…å­˜ä¸è¶³é”™è¯¯**
```
MemoryError: Unable to allocate array
```
**è§£å†³**:
- å‡å°‘`--dataset-size`å‚æ•°
- å¯ç”¨`--diversify-max-assignments 8`é™åˆ¶å†…å­˜ä½¿ç”¨
- è®¾ç½®`--k-children-max 500`é™åˆ¶å­èŠ‚ç‚¹æ•°

**Q3: å‚æ•°è°ƒä¼˜æ—¶é—´è¿‡é•¿**
```
Testing 27 parameter combinations...
```
**è§£å†³**:
- ä»£ç è‡ªåŠ¨é™åˆ¶ç»„åˆæ•°é‡(`max_combos = 9`)
- å‡å°‘æ•°æ®é›†å¤§å°è¿›è¡Œå¿«é€ŸéªŒè¯
- ä½¿ç”¨æ›´å°çš„å‚æ•°èŒƒå›´

**Q4: ç»„ä»¶é‡ç”¨éªŒè¯å¤±è´¥**
```
âŒ çº¯K-Meansä½¿ç”¨äº†æ–°è®­ç»ƒçš„èšç±»
```
**æ£€æŸ¥**:
- è¿™é€šå¸¸è¡¨ç¤ºä»£ç é€»è¾‘é—®é¢˜ï¼Œåº”è¯¥çœ‹åˆ°é‡ç”¨ç°æœ‰èšç±»çš„æ ‡è¯†
- æ£€æŸ¥æ—¥å¿—ä¸­çš„`reused_existing_clustering: True`æ ‡è¯†

### è°ƒè¯•æŠ€å·§
1. **ä½¿ç”¨å°æ•°æ®é›†**: å…ˆç”¨1000ä¸ªå‘é‡éªŒè¯é€»è¾‘æ­£ç¡®æ€§
2. **æ£€æŸ¥JSONè¾“å‡º**: è¯¦ç»†çš„æ€§èƒ½æ•°æ®å’Œé”™è¯¯ä¿¡æ¯éƒ½åœ¨ç»“æœæ–‡ä»¶ä¸­
3. **ç›‘æ§å†…å­˜ä½¿ç”¨**: ä½¿ç”¨ç³»ç»Ÿç›‘æ§å·¥å…·è§‚å¯Ÿå†…å­˜å˜åŒ–
4. **åˆ†é˜¶æ®µæµ‹è¯•**: å…ˆæµ‹è¯•åŸºç¡€åŠŸèƒ½ï¼Œå†å¯ç”¨é«˜çº§ä¼˜åŒ–

## ğŸ“š ç›¸å…³æŠ€æœ¯èµ„æ–™

### æ ¸å¿ƒç®—æ³•æ–‡æ¡£
- [HNSWç®—æ³•åŸç†è¯¦è§£](../docs/HNSWç®—æ³•åŸç†è¯¦è§£.md)
- [K-Means HNSWæ··åˆæ¶æ„](../docs/HNSW_Hybrid_Technical_Implementation.md) 
- [ç»„ä»¶é‡ç”¨ä¼˜åŒ–åŸç†](../COMPONENT_REUSE_OPTIMIZATION.md)

### å¤–éƒ¨å‚è€ƒèµ„æ–™
- [HNSWåŸå§‹è®ºæ–‡](https://arxiv.org/abs/1603.09320)
- [K-Meansèšç±»ç®—æ³•](https://scikit-learn.org/stable/modules/clustering.html#k-means)
- [SIFTç‰¹å¾æè¿°ç¬¦](https://en.wikipedia.org/wiki/Scale-invariant_feature_transform)
- [å‘é‡ç›¸ä¼¼æ€§æœç´¢ç»¼è¿°](https://arxiv.org/abs/1603.09320)

### æ€§èƒ½åŸºå‡†å‚è€ƒ
- SIFT-1Mæ•°æ®é›†æ ‡å‡†åŸºå‡†æµ‹è¯•ç»“æœ
- ä¸åŒè§„æ¨¡æ•°æ®é›†çš„æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”
- å†…å­˜ä½¿ç”¨å’ŒæŸ¥è¯¢æ—¶é—´çš„æƒè¡¡åˆ†æ

---

**ç‰ˆæœ¬**: v2.0 (ç»„ä»¶é‡ç”¨ä¼˜åŒ–ç‰ˆ)  
**æœ€åæ›´æ–°**: 2025å¹´9æœˆ22æ—¥  
**ä»£ç çŠ¶æ€**: å®Œå…¨ä¼˜åŒ–ï¼Œç”Ÿäº§å°±ç»ª  
**ä½œè€…**: datasketch-enhancedå›¢é˜Ÿ

**é‡è¦æé†’**: v2.0ç‰ˆæœ¬ç›¸æ¯”ä¹‹å‰ç‰ˆæœ¬æœ‰é‡å¤§æ”¹è¿›ï¼Œå»ºè®®æ‰€æœ‰ç”¨æˆ·å‡çº§ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚
