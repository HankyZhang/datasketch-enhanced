{
  "sweep_results": [
    {
      "parameters": {
        "n_clusters": 10,
        "k_children": 200,
        "child_search_ef": 300
      },
      "construction_time": 2.387603282928467,
      "phase_evaluations": [
        {
          "phase": "baseline_hnsw",
          "ef": 300,
          "recall_at_k": 1.0,
          "avg_query_time_ms": 6.78863525390625,
          "total_correct": 200,
          "total_expected": 200,
          "k": 10
        },
        {
          "phase": "clusters_only",
          "recall_at_k": 0.22,
          "avg_query_time_ms": 0.4500389099121094,
          "std_query_time_ms": 0.4975376033765775,
          "total_correct": 44,
          "total_expected": 200,
          "avg_individual_recall": 0.21999999999999997,
          "n_clusters": 10,
          "k": 10
        },
        {
          "recall_at_k": 0.85,
          "total_correct": 170,
          "total_expected": 200,
          "individual_recalls": [
            0.8,
            0.9,
            0.8,
            1.0,
            1.0,
            0.9,
            0.8,
            0.9,
            0.9,
            0.8,
            0.5,
            0.7,
            0.9,
            1.0,
            0.8,
            0.9,
            0.8,
            0.9,
            0.8,
            0.9
          ],
          "avg_individual_recall": 0.85,
          "std_individual_recall": 0.1118033988749895,
          "avg_query_time_ms": 2.130115032196045,
          "std_query_time_ms": 3.7210167116686614,
          "total_evaluation_time": 0.043616294860839844,
          "k": 10,
          "n_probe": 5,
          "system_stats": {
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "adaptive_k_children": false,
            "kmeans_fit_time": 2.2528936862945557,
            "child_mapping_time": 0.1256425380706787,
            "total_construction_time": 2.384584426879883,
            "num_children": 469,
            "avg_children_per_centroid": 46.9,
            "coverage_fraction": 0.469,
            "avg_search_time_ms": 2.0142436027526855,
            "avg_candidate_size": 334.4,
            "avg_jaccard_overlap": 0.4930234985158627,
            "std_jaccard_overlap": 0.11287649035861903,
            "max_jaccard_overlap": 0.6326530612244898,
            "overlap_samples": 45,
            "kmeans_inertia": 123204.7109375,
            "kmeans_iterations": 21,
            "cluster_size_stats": {
              "avg": 100.0,
              "std": 59.455865984778995,
              "min": 1,
              "max": 230
            }
          },
          "phase": "kmeans_hnsw_hybrid"
        },
        {
          "recall_at_k": 0.9,
          "total_correct": 180,
          "total_expected": 200,
          "individual_recalls": [
            0.8,
            1.0,
            0.9,
            1.0,
            1.0,
            0.9,
            1.0,
            0.9,
            0.9,
            0.9,
            0.6,
            0.8,
            1.0,
            1.0,
            0.8,
            0.9,
            0.8,
            0.9,
            1.0,
            0.9
          ],
          "avg_individual_recall": 0.9,
          "std_individual_recall": 0.1,
          "avg_query_time_ms": 2.3601651191711426,
          "std_query_time_ms": 6.595636046612597,
          "total_evaluation_time": 0.0497133731842041,
          "k": 10,
          "n_probe": 10,
          "system_stats": {
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "adaptive_k_children": false,
            "kmeans_fit_time": 2.2528936862945557,
            "child_mapping_time": 0.1256425380706787,
            "total_construction_time": 2.384584426879883,
            "num_children": 469,
            "avg_children_per_centroid": 46.9,
            "coverage_fraction": 0.469,
            "avg_search_time_ms": 2.187204360961914,
            "avg_candidate_size": 401.7,
            "avg_jaccard_overlap": 0.4930234985158627,
            "std_jaccard_overlap": 0.11287649035861903,
            "max_jaccard_overlap": 0.6326530612244898,
            "overlap_samples": 45,
            "kmeans_inertia": 123204.7109375,
            "kmeans_iterations": 21,
            "cluster_size_stats": {
              "avg": 100.0,
              "std": 59.455865984778995,
              "min": 1,
              "max": 230
            }
          },
          "phase": "kmeans_hnsw_hybrid"
        },
        {
          "recall_at_k": 0.9,
          "total_correct": 180,
          "total_expected": 200,
          "individual_recalls": [
            0.8,
            1.0,
            0.9,
            1.0,
            1.0,
            0.9,
            1.0,
            0.9,
            0.9,
            0.9,
            0.6,
            0.8,
            1.0,
            1.0,
            0.8,
            0.9,
            0.8,
            0.9,
            1.0,
            0.9
          ],
          "avg_individual_recall": 0.9,
          "std_individual_recall": 0.1,
          "avg_query_time_ms": 2.5703072547912598,
          "std_query_time_ms": 7.805387981718323,
          "total_evaluation_time": 0.05240368843078613,
          "k": 10,
          "n_probe": 20,
          "system_stats": {
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "adaptive_k_children": false,
            "kmeans_fit_time": 2.2528936862945557,
            "child_mapping_time": 0.1256425380706787,
            "total_construction_time": 2.384584426879883,
            "num_children": 469,
            "avg_children_per_centroid": 46.9,
            "coverage_fraction": 0.469,
            "avg_search_time_ms": 2.3059805234273276,
            "avg_candidate_size": 424.1333333333333,
            "avg_jaccard_overlap": 0.4930234985158627,
            "std_jaccard_overlap": 0.11287649035861903,
            "max_jaccard_overlap": 0.6326530612244898,
            "overlap_samples": 45,
            "kmeans_inertia": 123204.7109375,
            "kmeans_iterations": 21,
            "cluster_size_stats": {
              "avg": 100.0,
              "std": 59.455865984778995,
              "min": 1,
              "max": 230
            }
          },
          "phase": "kmeans_hnsw_hybrid"
        }
      ]
    }
  ],
  "optimal_parameters": {
    "parameters": {
      "n_clusters": 10,
      "k_children": 200,
      "child_search_ef": 300
    },
    "performance": {
      "phase": "baseline_hnsw",
      "ef": 300,
      "recall_at_k": 1.0,
      "avg_query_time_ms": 6.78863525390625,
      "total_correct": 200,
      "total_expected": 200,
      "k": 10
    },
    "construction_time": 2.387603282928467
  },
  "baseline_comparison": {
    "kmeans_hnsw": {
      "recall_at_k": 0.9,
      "total_correct": 180,
      "total_expected": 200,
      "individual_recalls": [
        0.8,
        1.0,
        0.9,
        1.0,
        1.0,
        0.9,
        1.0,
        0.9,
        0.9,
        0.9,
        0.6,
        0.8,
        1.0,
        1.0,
        0.8,
        0.9,
        0.8,
        0.9,
        1.0,
        0.9
      ],
      "avg_individual_recall": 0.9,
      "std_individual_recall": 0.1,
      "avg_query_time_ms": 0.5209565162658691,
      "std_query_time_ms": 0.25948966515930505,
      "total_evaluation_time": 0.010419130325317383,
      "k": 10,
      "n_probe": 10,
      "system_stats": {
        "n_clusters": 10,
        "k_children": 200,
        "child_search_ef": 300,
        "adaptive_k_children": false,
        "kmeans_fit_time": 0.06896114349365234,
        "child_mapping_time": 0.13541746139526367,
        "total_construction_time": 0.2059626579284668,
        "num_children": 469,
        "avg_children_per_centroid": 46.9,
        "coverage_fraction": 0.469,
        "avg_search_time_ms": 0.5209565162658691,
        "avg_candidate_size": 469.0,
        "avg_jaccard_overlap": 0.4930234985158627,
        "std_jaccard_overlap": 0.11287649035861905,
        "max_jaccard_overlap": 0.6326530612244898,
        "overlap_samples": 45,
        "kmeans_inertia": 123204.7109375,
        "kmeans_iterations": 21,
        "cluster_size_stats": {
          "avg": 100.0,
          "std": 59.455865984778995,
          "min": 1,
          "max": 230
        }
      }
    },
    "pure_kmeans": {
      "method": "pure_minibatch_kmeans",
      "recall_at_k": 1.0,
      "total_correct": 200,
      "total_expected": 200,
      "individual_recalls": [
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0
      ],
      "avg_individual_recall": 1.0,
      "std_individual_recall": 0.0,
      "avg_query_time_ms": 1.1045098304748535,
      "std_query_time_ms": 1.9132712400187932,
      "clustering_time": 0.04903721809387207,
      "n_clusters": 10,
      "n_probe": 10,
      "k": 10
    },
    "baseline_hnsw": [
      {
        "method": "baseline_hnsw",
        "ef": 50,
        "is_matching_kmeans_ef": false,
        "recall_at_k": 0.98,
        "avg_query_time_ms": 4.393970966339111,
        "total_correct": 196,
        "total_expected": 200
      },
      {
        "method": "baseline_hnsw",
        "ef": 100,
        "is_matching_kmeans_ef": false,
        "recall_at_k": 1.0,
        "avg_query_time_ms": 4.835963249206543,
        "total_correct": 200,
        "total_expected": 200
      },
      {
        "method": "baseline_hnsw",
        "ef": 200,
        "is_matching_kmeans_ef": false,
        "recall_at_k": 1.0,
        "avg_query_time_ms": 5.45802116394043,
        "total_correct": 200,
        "total_expected": 200
      },
      {
        "method": "baseline_hnsw",
        "ef": 300,
        "is_matching_kmeans_ef": true,
        "recall_at_k": 1.0,
        "avg_query_time_ms": 5.897533893585205,
        "total_correct": 200,
        "total_expected": 200
      },
      {
        "method": "baseline_hnsw",
        "ef": 400,
        "is_matching_kmeans_ef": false,
        "recall_at_k": 1.0,
        "avg_query_time_ms": 10.642898082733154,
        "total_correct": 200,
        "total_expected": 200
      }
    ],
    "parameter_consistency": {
      "kmeans_n_clusters": 10,
      "kmeans_child_search_ef": 300,
      "pure_kmeans_n_clusters": 10,
      "baseline_ef_matching_kmeans": 300
    },
    "comparison_summary": {
      "kmeans_hnsw_recall": 0.9,
      "kmeans_hnsw_time_ms": 0.5209565162658691,
      "pure_kmeans_recall": 1.0,
      "pure_kmeans_time_ms": 1.1045098304748535,
      "best_baseline_recall": 1.0,
      "best_baseline_time_ms": 4.393970966339111,
      "matching_ef_baseline_recall": 1.0,
      "matching_ef_baseline_time_ms": 5.897533893585205
    }
  },
  "adaptive_config": {
    "adaptive_k_children": false,
    "k_children_scale": 1.5,
    "k_children_min": 100,
    "k_children_max": null,
    "diversify_max_assignments": null,
    "repair_min_assignments": null,
    "manual_repair": false,
    "manual_repair_min": null
  },
  "evaluation_info": {
    "dataset_size": 1000,
    "query_size": 20,
    "dimension": 128,
    "timestamp": "2025-09-22 08:05:28"
  }
}