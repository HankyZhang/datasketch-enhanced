{
  "sweep_results": [
    {
      "parameters": {
        "n_clusters": 10,
        "k_children": 200,
        "child_search_ef": 300
      },
      "construction_time": 0.0984945297241211,
      "phase_evaluations": [
        {
          "phase": "baseline_hnsw",
          "ef": 200,
          "recall_at_k": 1.0,
          "avg_query_time_ms": 5.074882507324219,
          "std_query_time_ms": 5.79279678388972,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "k": 10
        },
        {
          "method": "pure_kmeans_shared_model",
          "recall_at_k": 0.98,
          "total_correct": 98,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            0.8,
            1.0,
            1.0
          ],
          "avg_individual_recall": 0.9800000000000001,
          "std_individual_recall": 0.05999999999999999,
          "avg_query_time_ms": 2.7661561965942383,
          "std_query_time_ms": 1.6823292834455779,
          "clustering_time": 0.0,
          "n_clusters": 10,
          "n_probe": 5,
          "k": 10,
          "used_shared_model": true,
          "phase": "clusters_only"
        },
        {
          "method": "pure_kmeans_shared_model",
          "recall_at_k": 1.0,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "avg_query_time_ms": 8.084535598754883,
          "std_query_time_ms": 8.197225301266428,
          "clustering_time": 0.0,
          "n_clusters": 10,
          "n_probe": 10,
          "k": 10,
          "used_shared_model": true,
          "phase": "clusters_only"
        },
        {
          "method": "pure_kmeans_shared_model",
          "recall_at_k": 1.0,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "avg_query_time_ms": 5.802702903747559,
          "std_query_time_ms": 6.414113539705573,
          "clustering_time": 0.0,
          "n_clusters": 10,
          "n_probe": 10,
          "k": 10,
          "used_shared_model": true,
          "phase": "clusters_only"
        },
        {
          "phase": "hybrid_hnsw_level",
          "n_probe": 5,
          "recall_at_k": 1.0,
          "avg_query_time_ms": 2.9730796813964844,
          "std_query_time_ms": 3.56862992919081,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "hybrid_stats": {
            "num_parents": 4,
            "num_children": 997,
            "avg_children_per_parent": 249.25,
            "construction_time": 0.04648327827453613,
            "parent_extraction_time": 0.0,
            "mapping_build_time": 0.04648327827453613,
            "coverage_fraction": 1.0,
            "avg_search_time_ms": 2.9730796813964844,
            "avg_candidate_size": 997.0,
            "mapping_method": "approx",
            "raw_child_coverage": 0.997,
            "adaptive_k_children": false,
            "k_children": 200,
            "mean_jaccard_overlap": 0.14461439315969882,
            "median_jaccard_overlap": 0.1172375987163308
          },
          "hybrid_build_time": 0.04716634750366211,
          "hybrid_k_children": 200,
          "k": 10
        },
        {
          "phase": "hybrid_hnsw_level",
          "n_probe": 10,
          "recall_at_k": 1.0,
          "avg_query_time_ms": 3.093886375427246,
          "std_query_time_ms": 6.005608783662323,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "hybrid_stats": {
            "num_parents": 4,
            "num_children": 997,
            "avg_children_per_parent": 249.25,
            "construction_time": 0.04648327827453613,
            "parent_extraction_time": 0.0,
            "mapping_build_time": 0.04648327827453613,
            "coverage_fraction": 1.0,
            "avg_search_time_ms": 3.0334830284118652,
            "avg_candidate_size": 997.0,
            "mapping_method": "approx",
            "raw_child_coverage": 0.997,
            "adaptive_k_children": false,
            "k_children": 200,
            "mean_jaccard_overlap": 0.14461439315969882,
            "median_jaccard_overlap": 0.1172375987163308
          },
          "hybrid_build_time": 0.04716634750366211,
          "hybrid_k_children": 200,
          "k": 10
        },
        {
          "phase": "hybrid_hnsw_level",
          "n_probe": 20,
          "recall_at_k": 1.0,
          "avg_query_time_ms": 2.7512073516845703,
          "std_query_time_ms": 5.399898598730096,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "hybrid_stats": {
            "num_parents": 4,
            "num_children": 997,
            "avg_children_per_parent": 249.25,
            "construction_time": 0.04648327827453613,
            "parent_extraction_time": 0.0,
            "mapping_build_time": 0.04648327827453613,
            "coverage_fraction": 1.0,
            "avg_search_time_ms": 2.9393911361694336,
            "avg_candidate_size": 997.0,
            "mapping_method": "approx",
            "raw_child_coverage": 0.997,
            "adaptive_k_children": false,
            "k_children": 200,
            "mean_jaccard_overlap": 0.14461439315969882,
            "median_jaccard_overlap": 0.1172375987163308
          },
          "hybrid_build_time": 0.04716634750366211,
          "hybrid_k_children": 200,
          "k": 10
        },
        {
          "recall_at_k": 0.99,
          "total_correct": 99,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            0.9,
            1.0,
            1.0
          ],
          "avg_individual_recall": 0.99,
          "std_individual_recall": 0.029999999999999992,
          "avg_query_time_ms": 3.0826330184936523,
          "std_query_time_ms": 6.87615168904954,
          "total_evaluation_time": 0.030826330184936523,
          "k": 10,
          "n_probe": 5,
          "system_stats": {
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "adaptive_k_children": false,
            "kmeans_fit_time": 0.0016112327575683594,
            "child_mapping_time": 0.09432053565979004,
            "total_construction_time": 0.09697937965393066,
            "num_children": 1000,
            "avg_children_per_centroid": 100.0,
            "coverage_fraction": 1.0,
            "avg_search_time_ms": 3.0826330184936523,
            "avg_candidate_size": 598.9,
            "shared_kmeans_used": true,
            "shared_data_used": true,
            "avg_jaccard_overlap": 0.16601238020921713,
            "std_jaccard_overlap": 0.13619480477994547,
            "max_jaccard_overlap": 0.4707792207792208,
            "overlap_samples": 45,
            "kmeans_inertia": 1.6077109827573968e+22,
            "kmeans_iterations": 3,
            "cluster_size_stats": {
              "avg": 100.0,
              "std": 75.32728589296178,
              "min": 9,
              "max": 226
            }
          },
          "phase": "kmeans_hnsw_single_pivot"
        },
        {
          "recall_at_k": 1.0,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "avg_query_time_ms": 6.158781051635742,
          "std_query_time_ms": 9.669166976871908,
          "total_evaluation_time": 0.06158781051635742,
          "k": 10,
          "n_probe": 10,
          "system_stats": {
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "adaptive_k_children": false,
            "kmeans_fit_time": 0.0016112327575683594,
            "child_mapping_time": 0.09432053565979004,
            "total_construction_time": 0.09697937965393066,
            "num_children": 1000,
            "avg_children_per_centroid": 100.0,
            "coverage_fraction": 1.0,
            "avg_search_time_ms": 4.620707035064697,
            "avg_candidate_size": 799.45,
            "shared_kmeans_used": true,
            "shared_data_used": true,
            "avg_jaccard_overlap": 0.16601238020921713,
            "std_jaccard_overlap": 0.13619480477994547,
            "max_jaccard_overlap": 0.4707792207792208,
            "overlap_samples": 45,
            "kmeans_inertia": 1.6077109827573968e+22,
            "kmeans_iterations": 3,
            "cluster_size_stats": {
              "avg": 100.0,
              "std": 75.32728589296178,
              "min": 9,
              "max": 226
            }
          },
          "phase": "kmeans_hnsw_single_pivot"
        },
        {
          "recall_at_k": 1.0,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "avg_query_time_ms": 1.5090703964233398,
          "std_query_time_ms": 1.079991674717449,
          "total_evaluation_time": 0.015090703964233398,
          "k": 10,
          "n_probe": 20,
          "system_stats": {
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "adaptive_k_children": false,
            "kmeans_fit_time": 0.0016112327575683594,
            "child_mapping_time": 0.09432053565979004,
            "total_construction_time": 0.09697937965393066,
            "num_children": 1000,
            "avg_children_per_centroid": 100.0,
            "coverage_fraction": 1.0,
            "avg_search_time_ms": 3.5834948221842446,
            "avg_candidate_size": 866.3,
            "shared_kmeans_used": true,
            "shared_data_used": true,
            "avg_jaccard_overlap": 0.16601238020921713,
            "std_jaccard_overlap": 0.13619480477994547,
            "max_jaccard_overlap": 0.4707792207792208,
            "overlap_samples": 45,
            "kmeans_inertia": 1.6077109827573968e+22,
            "kmeans_iterations": 3,
            "cluster_size_stats": {
              "avg": 100.0,
              "std": 75.32728589296178,
              "min": 9,
              "max": 226
            }
          },
          "phase": "kmeans_hnsw_single_pivot"
        },
        {
          "recall_at_k": 0.98,
          "total_correct": 98,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            0.9,
            1.0,
            1.0,
            0.9,
            1.0,
            1.0
          ],
          "avg_individual_recall": 0.9800000000000001,
          "std_individual_recall": 0.039999999999999994,
          "avg_query_time_ms": 7.169890403747559,
          "std_query_time_ms": 8.775172181313831,
          "total_evaluation_time": 0.07275032997131348,
          "k": 10,
          "n_probe": 5,
          "system_stats": {
            "method": "multi_pivot_kmeans_hnsw",
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "num_pivots": 2,
            "pivot_strategy": "line_perp_third",
            "pivot_overquery_factor": 1.2,
            "shared_kmeans_used": true,
            "shared_data_used": true,
            "coverage_fraction": 1.0,
            "num_children": 1000,
            "avg_children_per_centroid": 230.2,
            "avg_search_time_ms": 7.169890403747559,
            "std_search_time_ms": 8.775172181313831
          },
          "phase": "kmeans_hnsw_multi_pivot",
          "multi_pivot_build_time": 0.1394059658050537
        },
        {
          "recall_at_k": 1.0,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "avg_query_time_ms": 6.0268402099609375,
          "std_query_time_ms": 7.226206901751726,
          "total_evaluation_time": 0.060808658599853516,
          "k": 10,
          "n_probe": 10,
          "system_stats": {
            "method": "multi_pivot_kmeans_hnsw",
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "num_pivots": 2,
            "pivot_strategy": "line_perp_third",
            "pivot_overquery_factor": 1.2,
            "shared_kmeans_used": true,
            "shared_data_used": true,
            "coverage_fraction": 1.0,
            "num_children": 1000,
            "avg_children_per_centroid": 230.2,
            "avg_search_time_ms": 6.598365306854248,
            "std_search_time_ms": 8.058380571535022
          },
          "phase": "kmeans_hnsw_multi_pivot",
          "multi_pivot_build_time": 0.1394059658050537
        },
        {
          "recall_at_k": 1.0,
          "total_correct": 100,
          "total_expected": 100,
          "individual_recalls": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "avg_individual_recall": 1.0,
          "std_individual_recall": 0.0,
          "avg_query_time_ms": 5.579495429992676,
          "std_query_time_ms": 6.6434146199025035,
          "total_evaluation_time": 0.05579495429992676,
          "k": 10,
          "n_probe": 20,
          "system_stats": {
            "method": "multi_pivot_kmeans_hnsw",
            "n_clusters": 10,
            "k_children": 200,
            "child_search_ef": 300,
            "num_pivots": 2,
            "pivot_strategy": "line_perp_third",
            "pivot_overquery_factor": 1.2,
            "shared_kmeans_used": true,
            "shared_data_used": true,
            "coverage_fraction": 1.0,
            "num_children": 1000,
            "avg_children_per_centroid": 230.2,
            "avg_search_time_ms": 6.258742014567058,
            "std_search_time_ms": 7.631120856233036
          },
          "phase": "kmeans_hnsw_multi_pivot",
          "multi_pivot_build_time": 0.1394059658050537
        }
      ],
      "multi_pivot_enabled": true,
      "best_recall": 1.0,
      "methods_count": 5
    }
  ],
  "demo_parameters": {
    "n_clusters": 10,
    "k_children": 200,
    "child_search_ef": 300
  },
  "multi_pivot_config": {
    "enabled": true,
    "num_pivots": 2,
    "pivot_selection_strategy": "line_perp_third",
    "pivot_overquery_factor": 1.2
  },
  "adaptive_config": {
    "adaptive_k_children": false,
    "k_children_scale": 1.5,
    "k_children_min": 100,
    "k_children_max": null,
    "diversify_max_assignments": null,
    "repair_min_assignments": null
  },
  "evaluation_info": {
    "dataset_size": 1000,
    "query_size": 10,
    "dimension": 128,
    "multi_pivot_enabled": true,
    "timestamp": "2025-09-29 08:59:19"
  }
}